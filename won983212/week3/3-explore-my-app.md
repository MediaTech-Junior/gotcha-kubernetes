# 3. 앱 상태 확인하기

## Pod

**앱 컨테이너를 추상화한 것**입니다.

하나의 파드에는 1개 이상의 컨테이너가 포함될 수 있습니다. 쿠버네티스에서는 Pod가 개념상 최소 배포 단위입니다.

파드 단위로 고가용성 기능들을 제공하고, 스캐줄링합니다.

### 왜 컨테이너를 Pod로 묶어 쓰는가? 
- **묶은 컨테이너끼리 서로 통신할 수 있게 하기 위해서**: 동일한 리소스나 네트워크를 공유해서 연관된 컨테이너끼리 쉽게 통신할 수 있게 합니다. (network namespace가 동일)
- **컨테이너들을 그룹화해서 하나의 앱 단위로 간주하려고**: 복제할 때도 연관된 컨테이너들이 함께 복제되고, 마치 하나의 VM에서 실행되는 것 처럼 동작하게 하기 위해서입니다.

### 그런데 왜 Pod는 일반적으로 1개만 띄우는가?

여러 이유가 있겠지만.. 가장 큰 이유는 **개별적으로 스캐일링 할 수 있게 하기 위해서**입니다.

쿠버네티스의 스캐일링, 고가용성 기능은 파드 단위로 동작합니다. 더 세밀한 제어를 위해서, 가능한 파드에 하나의 컨테이너만 포함시키는 것이 좋습니다.

### 어떤 경우에 파드에 컨테이너를 여러 개 띄울까?

**사이드카 프로세스**로 구성된 경우. 주요 프로세스와 이 프로세스를 보완하는 다른 프로세스들로 구성된 경우입니다.

예를 들면 `app + logger`나 `app + monitoring agent`정도??

## 파드 상태 확인해보기

### 관련 명령들

 - `kubectl get pods`: 파드들 확인하기
 - `kubectl describe pods`: 파드 상태 더 자세하게 보기
 - `kubectl logs {POD_NAME}`: 파드 로그 보기
 - `kubectl exec {POD_NAME} -- {COMMAND}`: 파드에서 명령 실행하기

> ### `kubectl exec`에서 double dash(--)는 뭐지?
> 
> <u>kubectl exec 인자</u>와 <u>실행할 명령어</u>를 구분하기 위한 것입니다. 예를 들어서...
> 
> `kubectl exec kubia-7nog1 curl -s http://10.111.249.153`
> 
> 여기서 `-s`는 curl의 옵션인데, kubectl의 옵션으로 들어갑니다. double dash를 넣어서 명령과 인자를 구분해야합니다. 아래처럼요!
> 
> `kubectl exec kubia-7nog1 -- curl -s http://10.111.249.153`
> 
> 물론 실행하려는 명령에 인자가 없으면, double dash를 넣지 않아도 됩니다.